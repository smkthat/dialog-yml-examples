# Проект Dialog-YML Example

[English](README.md) | [Русский](README.ru.md)

---

Это пример проекта Telegram-бота, созданного с использованием фреймворка aiogram и библиотеки dialog-yml, которая позволяет определять диалоговые интерфейсы через YAML-файлы.

**Демо-бот в Telegram:** [t.me/dialog_yml_demo_bot](https://t.me/dialog_yml_demo_bot)

## Описание

Проект демонстрирует возможности создания сложных диалоговых интерфейсов для Telegram-ботов с использованием декларативного подхода через YAML-конфигурации. Благодаря библиотеке dialog-yml, вся логика диалогов определяется в YAML-файлах, что делает проект более поддерживаемым и гибким.

## Особенности

- Использование YAML-файлов для определения диалоговых интерфейсов
- Поддержка различных типов виджетов:
  - Кнопки и меню
  - Прокрутка и списки
  - Выбор элементов
  - Календари
  - Счетчики и прогресс-бары
  - Комбинированные виджеты
  - Многошаговые процессы
  - Обработка callback-запросов
- Пользовательские виджеты (например, кастомный календарь)
- Обработка исключений и восстановление после перезапусков бота

## Архитектура

- `main.py` - точка входа в приложение
- `src/bot.py` - основная логика бота и диспетчера
- `src/data/*.yaml` - YAML-файлы с определениями диалогов
- `src/functions/*.py` - функции обратного вызова и обработчики
- `src/functions/custom/*.py` - пользовательские виджеты и компоненты

## Установка и запуск

1. Установите зависимости:

```bash
uv sync
```

1. Создайте файл `.env`, скопировав из `.env.example` и добавьте токен бота:

```bash
cp .env.example .env
```

1. Запустите бота:

```bash
make run
```

## Доступные команды

- `make run` - запуск бота
- `make check` - проверка качества кода
- `make format` - форматирование кода
- `make test` - запуск тестов
- `make help` - отображение справочной информации

## Структура диалогов

Проект включает следующие разделы:

- Layout widgets - виджеты разметки
- Scrolling widgets - прокручиваемые списки
- Selection widgets - элементы выбора
- Calendar widgets - календари
- Counter and Progress - счетчики и прогресс
- Combining widgets - комбинированные виджеты
- Multiple steps - многошаговые процессы
- Callbacks - обработка callback-запросов

## Технологии

- [aiogram](https://github.com/aiogram/aiogram) - фреймворк для создания Telegram-ботов
- [aiogram-dialog](https://github.com/Tishka17/aiogram_dialog) - библиотека для создания диалоговых интерфейсов
- [dialog-yml](https://github.com/smkthat/dialog-yml) - библиотека для определения диалогов через YAML
- [Ruff](https://github.com/astral-sh/ruff) - быстрый линтер и форматтер Python-кода
- [uv](https://github.com/astral-sh/uv) - быстрый менеджер пакетов для Python

## Структура проекта

```bash
├── .env.example          # Пример файла переменных окружения
├── .gitignore           # Правила игнорирования файлов Git
├── Makefile             # Скрипты для сборки и запуска
├── README.ru.md         # Документация проекта (на русском)
├── README.md            # Documentation of the project (in English)
├── main.py              # Точка входа
├── pyproject.toml       # Конфигурация проекта и зависимости
├── src/
│   ├── bot.py           # Основная логика бота
│   ├── data/            # YAML-файлы с определениями диалогов
│   └── functions/       # Функции обработки событий
└── tests/               # Тесты (заглушка)
```
